Задание №9 (SQL)

Подключитесь к своей базе данных. SQL запросы и скрин диаграммы выгрузить на GitHub
 1. Создайте базу из представленной картинки.
 У каждой таблицы должно быть поле id. id - автоинкрементальный и является первичным ключом.
 2. Заполните таблицы данными. Не менее 10 строк в каждой таблице.
 3. Добавить таблицу Suppliers с полями id, name.
 4. Добавить 10 строк поставщиков в таблицу Suppliers.
 5. Обновить таблицу Materials. Добавить поле suplier_id которое связано с полем id в таблице Suppliers.
 6. Обновить таблицу Employees. Добавить varchar поле surname на 50 символов.
 7. Обновить таблицу Salary. Добавить varchar поле currency на 7 символов.

 
--1. Создайте базу из представленной картинки.
 У каждой таблицы должно быть поле id. id - автоинкрементальный и является первичным ключом.

create table roles(
	id serial primary key,
	role_title varchar not null
	);

create table salary(
	id serial primary key,
	monthly_salary int not null
	);

create table roles_salary(
	id serial primary key,
	id_role int not null,
	id_salary int not null,
	foreign key (id_role)
		references roles (id),
	foreign key (id_salary)
		references salary (id)		
	);
	
create table employees(
	id serial primary key,
	employee_name varchar not null
	);

create table employees_roles(
	id serial primary key,
	id_role int not null,
	id_employee int not null,
	foreign key (id_role)
		references roles (id),
	foreign key (id_employee)
		references employees(id)
	);
	
create table service(
	id serial primary key,
	service_tittle varchar not null,
	price int not null
	);
	
	create table materials(
	id serial primary key,
	material_tittle varchar not null,
	amount int not null,
	price int not null
	);
	
	create table claim(
	id serial primary key,
	service_id int not null,
	employee_id int not null,
	material_id int not null,
	claim_date date not null,
	sales_manager int not null,
	foreign key (employee_id)
		references employees (id),
	foreign key (sales_manager)
		references employees(id),
	foreign key (service_id)
		references service(id),
	foreign key (material_id)
		references materials(id)
	);
	

--2. Заполните таблицы данными. Не менее 10 строк в каждой таблице.	
--Заполнение salary
insert into salary(id, monthly_salary) values (default, 500);
insert into salary(id, monthly_salary) values (default, 800);
insert into salary(id, monthly_salary) values (default, 9000);
insert into salary(id, monthly_salary) values (default, 4500);
insert into salary(id, monthly_salary) values (default, 1500);
insert into salary(id, monthly_salary) values (default, 2500);
insert into salary(id, monthly_salary) values (default, 1200);
insert into salary(id, monthly_salary) values (default, 2500);
insert into salary(id, monthly_salary) values (default, 3200);
insert into salary(id, monthly_salary) values (default, 1000);

select* from salary;

--Заполнение roles
insert into roles(id, role_title) values (default, 'market risk analyst');
insert into roles(id, role_title) values (default, 'conflict-manager');
insert into roles(id, role_title) values (default, 'HR analyst');
insert into roles(id, role_title) values (default, 'planning specialist');
insert into roles(id, role_title) values (default, 'time broker');
insert into roles(id, role_title) values (default, 'BIM-manager');
insert into roles(id, role_title) values (default, 'risk manager');
insert into roles(id, role_title) values (default, 'office manager');
insert into roles(id, role_title) values (default, 'product manager');
insert into roles(id, role_title) values (default, 'innovation manager');

select* from roles;

--Заполнение roles_salary
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 1, 10);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 3, 9);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 2, 6);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 4, 1);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 5, 2);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 9, 10);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 10, 3);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 8, 4);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 7, 5);
INSERT INTO roles_salary (id, id_role, id_salary) VALUES (DEFAULT, 6, 7);

select* from roles_salary;

--Заполнение employees
insert into employees(id, employee_name) values (default, 'Alex');
insert into employees(id, employee_name) values (default, 'Leo');
insert into employees(id, employee_name) values (default, 'Naomi');
insert into employees(id, employee_name) values (default, 'Alice');
insert into employees(id, employee_name) values (default, 'Eva');
insert into employees(id, employee_name) values (default, 'Jordan');
insert into employees(id, employee_name) values (default, 'Max');
insert into employees(id, employee_name) values (default, 'Sally');
insert into employees(id, employee_name) values (default, 'Bob');
insert into employees(id, employee_name) values (default, 'Dob');
insert into employees(id, employee_name) values (default, 'Dominic');

select* from employees;

--Заполнение employees_roles
insert into employees_roles(id, id_role, id_employee) values (default, 1, 10);
insert into employees_roles(id, id_role, id_employee) values (default, 6, 9);
insert into employees_roles(id, id_role, id_employee) values (default, 7, 5);
insert into employees_roles(id, id_role, id_employee) values (default, 5, 1);
insert into employees_roles(id, id_role, id_employee) values (default, 10, 8);
insert into employees_roles(id, id_role, id_employee) values (default, 8, 2);
insert into employees_roles(id, id_role, id_employee) values (default, 3, 3);
insert into employees_roles(id, id_role, id_employee) values (default, 4, 7);
insert into employees_roles(id, id_role, id_employee) values (default, 9, 4);
insert into employees_roles(id, id_role, id_employee) values (default, 2, 6);

select* from employees_roles;

--Заполнение service
insert into service(id, service_tittle, price) values (default,'computer diagnostic', 1200);
insert into service(id, service_tittle, price) values (default,'virus removal', 800);
insert into service(id, service_tittle, price) values (default,'computer tune-up', 750);
insert into service(id, service_tittle, price) values (default,'networking services', 1100);
insert into service(id, service_tittle, price) values (default,'data back up', 2200);
insert into service(id, service_tittle, price) values (default,'computer development', 450);
insert into service(id, service_tittle, price) values (default,'re-location ', 560);
insert into service(id, service_tittle, price) values (default,'setup', 880);
insert into service(id, service_tittle, price) values (default,'spyware removal', 1000);
insert into service(id, service_tittle, price) values (default,'network design', 1300);

select* from service;

--Заполнение materials

insert into materials (id, material_tittle, amount, price) values (default, 'multitester', 3, 600);
insert into materials (id, material_tittle, amount, price) values (default, 'cable testers', 4, 1200);
insert into materials (id, material_tittle, amount, price) values (default, 'data-recovery software', 2, 100);
insert into materials (id, material_tittle, amount, price) values (default, 'long nose pliers', 10, 1800);
insert into materials (id, material_tittle, amount, price) values (default, 'allen wrench', 20, 900);
insert into materials (id, material_tittle, amount, price) values (default, 'crimping tools', 13, 5200);
insert into materials (id, material_tittle, amount, price) values (default, 'soldering iron ', 2, 3200);
insert into materials (id, material_tittle, amount, price) values (default, 'allen wrench', 10, 1000);
insert into materials (id, material_tittle, amount, price) values (default, 'ATX Power Supply Tester', 5, 1200);
insert into materials (id, material_tittle, amount, price) values (default, 'screwdriver', 4, 800);

select* from materials;


--Заполнение claim

insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 2, 1, current_timestamp,10);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 2, 2, 7, current_timestamp,9);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 3, 8, current_timestamp,1);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 4, 15, current_timestamp,8);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 5, 14, current_timestamp,7);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 6, 13, current_timestamp,6);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 7, 12, current_timestamp,5);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 8, 11, current_timestamp,4);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 9, 10, current_timestamp,3);
insert into claim(id, service_id, employee_id, material_id, claim_date, sales_manager) 
values (default, 1, 10, 9, current_timestamp,2);


select* from service;

-- 3. Добавить таблицу Suppliers с полями id, name.

create table suppliers(
	id serial primary key,
	name varchar not null
	);
	
--4. Добавить 10 строк поставщиков в таблицу Suppliers.
insert into suppliers(id, name) values (default, 'AWG');
insert into suppliers(id, name) values (default, 'PRT');
insert into suppliers(id, name) values (default, 'WRT');
insert into suppliers(id, name) values (default, 'BYT');
insert into suppliers(id, name) values (default, 'QAZ');
insert into suppliers(id, name) values (default, 'BOP');
insert into suppliers(id, name) values (default, 'COL');
insert into suppliers(id, name) values (default, 'POL');
insert into suppliers(id, name) values (default, 'WER');
insert into suppliers(id, name) values (default, 'AWA');

select * from suppliers;


--5. Обновить таблицу Materials. Добавить поле suplier_id которое связано с полем id в таблице Suppliers
alter table materials
	add column supplier_id int,
	add foreign key (supplier_id)
	references suppliers (id);


--6. Обновить таблицу Employees. Добавить varchar поле surname на 50 символов.
alter table employees 
	add column surname varchar (50);


--7. Обновить таблицу Salary. Добавить varchar поле currency на 7 символов.
alter table salary 
	add column currency varchar (7);

